# name of the workflow as it will appear in the "Actions" tab
name: label-issue
# (optional) name for workflow runs generated from the workflow
run-name: ${{ github.actor }} created a new issue
# trigger for the workflow
on:
  issues:
    types: [opened]

# Groups together all the jobs that are to be ran
jobs:
  label-issue:
    runs-on: ubuntu-latest
    name: Labels an issue as test
    steps:
      # To use this repository's private action,
      # you must check out the repository
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 20
          cache: npm

      - name: Install Dependencies
        id: install
        run: npm ci

      - name: Build dist/ Directory
        id: build
        run: npm run bundle

      - name: Label issue
        uses: ./dist/index.js
        with:
          owner: ${{ github.repository_owner }}
          repo: ${{ github.event.repository.name }}
          issue_number: ${{ github.event.issue.number }}
          token: ${{ secrets.PERSONAL_ACCESS_TOKEN }}
